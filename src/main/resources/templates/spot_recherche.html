<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{visiteur_layout.html}">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css"
	th:href="@{/css/bootstrap.min.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
<title>Rechercher des spots</title>
</head>
<body class="body-without-nav-pills">

	<div layout:fragment="content">
		<div class="row">
			<div class="col-lg-12">
				<form th:action="@{/visiteur/spot/recherche}"
					th:object="${spotForm}" method="post">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title">Critères de recherche des sites de
								grimpe</h3>
						</div>
						<div class="list-group">
							<div class="list-group-item">
								<h4 class="list-group-item-heading">Spots</h4>
								<div class="list-group-item-text">
									<div class="row">
										<div class="col-lg-4">
											<div class="form-group">
												<label class="control-label">Nom</label> <input type="text"
													class="form-control" th:field="*{nomSpot}"> <span
													th:if="${#fields.hasErrors('nomSpot')}"
													th:errors="*{nomSpot}"></span>
											</div>
										</div>
										<div class="col-lg-4">
											<div class="form-group">
												<label class="control-label">Lieu</label> <input type="text"
													class="form-control"
													placeholder="Région, département, code postal, ville"
													th:field="*{lieuFranceSpot}"> <span
													th:if="${#fields.hasErrors('lieuFranceSpot')}"
													th:errors="*{lieuFranceSpot}"></span>
											</div>
										</div>
										<div class="col-lg-4">
											<div class="form-group">
												<label for="officielSpot">Officiel</label> <select
													class="form-control" th:field="*{isOfficielSpot}">
													<option th:value="null"></option>
													<option th:value="true">Oui</option>
													<option th:value="false">Non</option>
												</select> <span th:if="${#fields.hasErrors('isOfficielSpot')}"
													th:errors="*{isOfficielSpot}"></span>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="list-group-item">
								<h4 class="list-group-item-heading">Secteurs</h4>
								<div class="list-group-item-text">
									<div class="row">
										<div class="col-lg-4">
											<div class="form-group">
												<label class="control-label">Nom</label> <input type="text"
													class="form-control" th:field="*{nomSecteur}"> <span
													th:if="${#fields.hasErrors('nomSecteur')}"
													th:errors="*{nomSecteur}"></span>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="list-group-item">
								<h4 class="list-group-item-heading">Voies</h4>
								<div class="list-group-item-text">
									<div class="row">
										<div class="col-lg-4">
											<div class="form-group">
												<label class="control-label">Nom</label> <input type="text"
													class="form-control" th:field="*{nomVoie}"> <span
													th:if="${#fields.hasErrors('nomVoie')}"
													th:errors="*{nomVoie}"></span>
											</div>
										</div>
										<div class="col-lg-4">
											<div class="form-group">
												<label class="control-label">Cotation</label>
												<div class="row">
													<div class="col-lg-6">
														<div class="input-group">
															<span class="input-group-addon">min</span>
															<div class="row row-no-gutters">
																<div class="col-lg-4">
																	<select
																		class="form-control select-no-left-right-padding"
																		th:field="*{cotationMinVoieUnitePrincipale}">
																		<option value=""></option>
																		<option value="3">3</option>
																		<option value="4">4</option>
																		<option value="5">5</option>
																		<option value="6">6</option>
																		<option value="7">7</option>
																		<option value="8">8</option>
																		<option value="9">9</option>
																	</select> <span
																		th:if="${#fields.hasErrors('cotationMinVoieUnitePrincipale')}"
																		th:errors="*{cotationMinVoieUnitePrincipale}"></span>
																</div>
																<div class="col-lg-4">
																	<select
																		class="form-control select-no-left-right-padding"
																		th:field="*{cotationMinVoieUniteSecondaire}">
																		<option value=""></option>
																		<option value="a">a</option>
																		<option value="b">b</option>
																		<option value="c">c</option>
																	</select> <span
																		th:if="${#fields.hasErrors('cotationMinVoieUniteSecondaire')}"
																		th:errors="*{cotationMinVoieUniteSecondaire}"></span>
																</div>
																<div class="col-lg-4">
																	<select
																		class="form-control select-no-left-right-padding"
																		th:field="*{cotationMinVoieUniteTertiaire}">
																		<option value=""></option>
																		<option value="+">+</option>
																	</select> <span
																		th:if="${#fields.hasErrors('cotationMinVoieUniteTertiaire')}"
																		th:errors="*{cotationMinVoieUniteTertiaire}"></span>
																</div>
															</div>
														</div>
													</div>
													<div class="col-lg-6">
														<div class="input-group">
															<span class="input-group-addon">max</span>
															<div class="row row-no-gutters">
																<div class="col-lg-4">
																	<select
																		class="form-control select-no-left-right-padding"
																		th:field="*{cotationMaxVoieUnitePrincipale}">
																		<option value=""></option>
																		<option value="3">3</option>
																		<option value="4">4</option>
																		<option value="5">5</option>
																		<option value="6">6</option>
																		<option value="7">7</option>
																		<option value="8">8</option>
																		<option value="9">9</option>
																	</select>
																</div>
																<div class="col-lg-4">
																	<select
																		class="form-control select-no-left-right-padding"
																		th:field="*{cotationMaxVoieUniteSecondaire}">
																		<option value=""></option>
																		<option value="a">a</option>
																		<option value="b">b</option>
																		<option value="c">c</option>
																	</select>
																</div>
																<div class="col-lg-4">
																	<select
																		class="form-control select-no-left-right-padding"
																		th:field="*{cotationMaxVoieUniteTertiaire}">
																		<option value=""></option>
																		<option value="+">+</option>
																	</select>
																</div>
															</div>
														</div>
														<div th:if="${spotForm.isFieldsCotationValid==false}">
															<div class="input-group">
																<span
																	class="input-group-addon invisible no-bottom-top-padding">max</span>
																<div class="row row-no-gutters">
																	<div class="col-lg-4 text-center">
																		<span
																			th:if="${#fields.hasErrors('cotationMaxVoieUnitePrincipale')}">1.</span>
																	</div>
																	<div class="col-lg-4 text-center">
																		<span
																			th:if="${#fields.hasErrors('cotationMaxVoieUniteSecondaire')}">2.</span>
																	</div>
																	<div class="col-lg-4 text-center">
																		<span
																			th:if="${#fields.hasErrors('cotationMaxVoieUniteTertiaire')}">3.</span>
																	</div>
																</div>
															</div>
															<div class="row row-no-gutters"
																th:if="${#fields.hasErrors('cotationMaxVoieUnitePrincipale')}">
																<div class="col-lg-1">1.</div>
																<div class="col-lg-11 no-bottom-top-padding">
																	<span th:errors="*{cotationMaxVoieUnitePrincipale}"></span>
																</div>
															</div>
															<div class="row row-no-gutters"
																th:if="${#fields.hasErrors('cotationMaxVoieUniteSecondaire')}">
																<div class="col-lg-1">2.</div>
																<div class="col-lg-11">
																	<span th:errors="*{cotationMaxVoieUniteSecondaire}"></span>
																</div>
															</div>
															<div class="row row-no-gutters"
																th:if="${#fields.hasErrors('cotationMaxVoieUniteTertiaire')}">
																<div class="col-lg-1">3.</div>
																<div class="col-lg-11">
																	<span th:errors="*{cotationMaxVoieUniteTertiaire}"></span>
																</div>
															</div>
														</div>
														<div th:if="${#fields.hasErrors('listeCotations')}">
															<span th:errors="*{listeCotations}"></span>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-lg-4">
											<div class="form-group">
												<label class="control-label">Hauteur [m]</label>
												<div class="row">
													<div class="col-lg-6">
														<div class="input-group">
															<span class="input-group-addon">min</span> <input
																type="number" class="form-control"
																th:field="*{hauteurMinVoie}">
														</div>
														<span th:if="${#fields.hasErrors('hauteurMinVoie')}"
															th:errors="*{hauteurMinVoie}"></span>
													</div>
													<div class="col-lg-6">
														<div class="input-group">
															<span class="input-group-addon">max</span> <input
																type="number" class="form-control"
																th:field="*{hauteurMaxVoie}">
														</div>
														<span th:if="${#fields.hasErrors('hauteurMaxVoie')}"
															th:errors="*{hauteurMaxVoie}"></span>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="list-group-item">
								<div class="list-group-item-text text-center">
									<button type="submit" class="btn btn-primary btn-lg">Trouver</button>
									<a class="btn btn-default navbar-btn" role="button"
										th:href="@{/visiteur/spot/recherche}">Effacer</a>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">
							Résultat de recherche des sites de grimpe <span class="badge"
								th:text="${nbSpots}"></span>
						</h3>
					</div>
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>nom</th>
								<th>Région</th>
								<th>Département</th>
								<th>Code postal</th>
								<th>Ville</th>
								<th>Officiel</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="s:${listeSpots}">
								<td th:text="${s.nom}"></td>
								<td th:text="${s.lieuFrance.region}"></td>
								<td th:text="${s.lieuFrance.departement}"></td>
								<td th:text="${s.lieuFrance.codePostale}"></td>
								<td th:text="${s.lieuFrance.ville}"></td>
								<td><span th:if="${s.tagQ}"><img
										alt="Officiel les amis de l'escalade"
										th:src="@{/img/rating_star_icon_24_24.png}"></span></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<!-- layout:fragment -->

	<script th:src="@{/js/jquery-3.4.1.js}"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>
</body>
</html>