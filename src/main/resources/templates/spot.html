<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{visiteur_layout.html}">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css"
	th:href="@{/css/bootstrap.min.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
<title>Spot</title>
</head>
<body class="body-without-nav-pills">

	<div layout:fragment="content">
		<div class="row">
			<div class="col-lg-12">
				<ul class="breadcrumb">
					<li><a th:href="@{/visiteur/accueil}" data-toggle="tooltip"
						data-placement="bottom" title="Accueil"><span
							class="glyphicon glyphicon-home"></span></a></li>
					<li><a
						th:href="@{/visiteur/spot/recherche/resultat(page=${pageNumber},size=${pageSize})}"
						data-toggle="tooltip" data-placement="bottom"
						title="Recherche de spots"><span
							class="glyphicon glyphicon-search"></span></a></li>
					<li class="active" th:text="${spot.nom}"></li>
				</ul>
				<div class="row line-spacer">
					<div class="col-lg-12">
						<h1 class="no-top-margin">
							[[${spot.nom}]] <span th:if="${spot.tagQ}"><img
								alt="Officiel les amis de l'escalade"
								th:src="@{/img/rating_star_icon_24_24.png}"
								data-toggle="tooltip" data-placement="bottom" title="Officiel"></span>
						</h1>
					</div>
				</div>
				<h2>Lieu</h2>
				<div class="row">
					<div class="col-lg-4">
						<div class="table table-responsive">
							<table class="table text-nowrap">
								<tbody>
									<tr>
										<td class="col-lg-4"><strong>Région</strong></td>
										<td class="col-lg-8" th:text="${spot.lieuFrance.region}"></td>
									</tr>
									<tr>
										<td><strong>Département</strong></td>
										<td th:text="${spot.lieuFrance.departement}"></td>
									</tr>
									<tr>
										<td><strong>Code postal</strong></td>
										<td th:text="${spot.lieuFrance.codePostale}"></td>
									</tr>
									<tr>
										<td><strong>Ville</strong></td>
										<td th:text="${spot.lieuFrance.ville}"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div th:if="${spot.plan!=null}" class="col-lg-8">
						<img class="img-responsive img-hover center-block"
							data-toggle="modal" data-target="#modalPlanSpot"
							th:src="@{${cheminPlan}+${spot.plan.plan}}">
						<div id="modalPlanSpot" class="modal modal-fullscreen fade"
							role="dialog">
							<div class="modal-dialog modal-dialog-fullscreen">
								<div class="modal-content modal-content-fullscreen">
									<div class="modal-header modal-header-fullscreen">
										<button type="button" class="close" data-dismiss="modal">
											<span><img th:src="@{/img/close_white_24_24.png}"></span>
										</button>
										<h1 class="modal-title modal-title-fullscreen text-center">
											[[${spot.nom}]] <span th:if="${spot.tagQ}"><img
												alt="Officiel les amis de l'escalade"
												th:src="@{/img/rating_star_icon_24_24.png}"
												data-toggle="tooltip" data-placement="bottom"
												title="Officiel"></span>
										</h1>
									</div>
									<div class="modal-body modal-body-fullscreen text-center">
										<img th:src="@{${cheminPlan}+${spot.plan.plan}}">
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>
				<h2>Description</h2>
				<p th:text="${spot.description==null} ? '-' : ${spot.description}"></p>
				<h2>Remarque</h2>
				<p th:text="${spot.remarque==null} ? '-' : ${spot.remarque}"></p>
				<h2>Secteurs</h2>
				<div class="panel-group" id="secteur">
					<div th:each="secteur:${listeSecteurs}" class="panel panel-default">
						<div class="panel-heading panel-heading-hover"
							data-toggle="collapse" data-parent="#secteur"
							th:href="'#secteur'+${secteur.id}">
							<h3 class="accordion-title" th:text="${secteur.nom}"></h3>
						</div>
						<div th:id="'secteur'+${secteur.id}"
							class="panel-collapse collapse"
							th:classappend="${secteur.id==secteurId} ? in : ''">
							<div class="panel-body">
								<h4>Description</h4>
								<p
									th:text="${secteur.description==null} ? '-' : ${secteur.description}"></p>
								<h4>Remarque</h4>
								<p
									th:text="${secteur.remarque==null} ? '-' : ${secteur.remarque}"></p>
								<div th:if="${secteur.plan!=null}">
									<div class="vertical-spacer"></div>
									<img
										class="img-responsive img-hover no-top-padding no-top-margin center-block"
										data-toggle="modal"
										th:data-target="'#modalPlanSecteur'+${secteur.id}"
										th:src="@{${cheminPlan}+${secteur.plan.plan}}">
									<div th:id="'modalPlanSecteur'+${secteur.id}"
										class="modal modal-fullscreen fade" role="dialog">
										<div class="modal-dialog modal-dialog-fullscreen">
											<div class="modal-content modal-content-fullscreen">
												<div class="modal-header modal-header-fullscreen">
													<button type="button" class="close" data-dismiss="modal">
														<span><img th:src="@{/img/close_white_24_24.png}"></span>
													</button>
													<h1 class="modal-title modal-title-fullscreen text-center"
														th:text="${secteur.nom}"></h1>
												</div>
												<div class="modal-body modal-body-fullscreen text-center">
													<img th:src="@{${cheminPlan}+${secteur.plan.plan}}">
												</div>
											</div>
										</div>
									</div>
									<div class="vertical-spacer"></div>
								</div>
								<table class="table table-striped table-hover">
									<thead class="text-nowrap">
										<tr>
											<th>Numéro</th>
											<th>Nom</th>
											<th>Cotation</th>
											<th>Hauteur [m]</th>
											<th>Nb longueurs</th>
											<th>Nb spits</th>
											<th>Remarque</th>
											<th>Plan</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="voie:${mapVoies.get(secteur.id)}" class="pointer"
											th:onclick="'javascript:voieResultTableRowClicked(\'' + ${spot.id} + '\',\'' + ${secteur.id} + '\',\'' + ${voie.id} + '\',\'' + ${pageNumber} + '\',\'' + ${pageSize} + '\');'">
											<td th:text="${voie.numero}"></td>
											<td th:text="${voie.nom}"></td>
											<td
												th:text="${voie.cotationFrance == null ? '' : voie.cotationFrance.toString()}"></td>
											<td th:text="${voie.hauteur}"></td>
											<td
												th:text="${mapLongueurs.get(voie.id).size() == 0 ? '' : mapLongueurs.get(voie.id).size()}"></td>
											<td th:text="${mapNbSpits.get(voie.id)}"></td>
											<td th:text="${voie.remarque}"></td>
											<td><span th:if="${voie.plan!=null}"
												class="glyphicon glyphicon-eye-open"></span></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- layout:fragment -->

	<script th:src="@{/js/jquery-3.4.1.js}"></script>
	<script th:src="@{/js/jquery-ui.js}"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>
</body>
</html>