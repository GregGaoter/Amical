<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{ami_layout.html}">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css"
	th:href="@{/css/bootstrap.min.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
<title th:text="#{message.recherchertopos}"></title>
</head>
<body class="body-without-nav-pills">

	<div layout:fragment="content">
		<div class="row">
			<div class="col-lg-12">
				<form th:action="@{/ami/topo/recherche}"
					th:object="${rechercheTopoForm}" method="post">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title"
								th:text="#{message.criteresRechercheTopos}"></h3>
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-lg-6">
									<div class="form-group"
										th:classappend="${#fields.hasErrors('nom')} ? 'has-error has-feedback' : ''">
										<label class="control-label" th:text="#{message.nom}"></label>
										<input type="text" id="nomManuel" class="form-control"
											th:field="*{nom}"
											th:placeholder="#{message.placeHolderNomSpot}"><span
											th:if="${#fields.hasErrors('nom')}"
											class="glyphicon glyphicon-remove form-control-feedback"></span>
										<span th:if="${#fields.hasErrors('nom')}" th:errors="*{nom}"
											class="text-danger"></span>
									</div>
								</div>
								<div class="col-lg-6">
									<div class="form-group"
										th:classappend="${#fields.hasErrors('lieuFranceTemplate')} ? 'has-error has-feedback' : ''">
										<label class="control-label" th:text="#{message.lieu}"></label>
										<input type="text" id="lieuSpot" class="form-control"
											th:placeholder="#{message.placeHolderLieu}"
											th:field="*{lieuFranceTemplate}"><span
											th:if="${#fields.hasErrors('lieuFranceTemplate')}"
											class="glyphicon glyphicon-remove form-control-feedback"></span>
										<span th:if="${#fields.hasErrors('lieuFranceTemplate')}"
											th:errors="*{lieuFranceTemplate}" class="text-danger"></span>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-lg-6">
									<div class="form-group"
										th:classappend="${#fields.hasErrors('categorie')} ? 'has-error has-feedback' : ''">
										<label class="control-label" th:text="#{message.categorie}"></label>
										<select class="form-control" th:field="*{categorie}"
											th:classappend="${#fields.hasErrors('categorie')} ? has-error : ''">
											<option th:each="l:${categorieManuelLabels}" th:value="${l}"
												th:text="${l}"></option>
										</select><span th:if="${#fields.hasErrors('categorie')}"
											class="glyphicon glyphicon-remove form-control-feedback"></span>
										<span th:if="${#fields.hasErrors('categorie')}"
											th:errors="*{categorie}" class="text-danger"></span>
									</div>
								</div>
								<div class="col-lg-6">
									<div class="form-group"
										th:classappend="${#fields.hasErrors('etat')} ? 'has-error has-feedback' : ''">
										<label class="control-label" th:text="#{message.etat}"></label>
										<select class="form-control" th:field="*{etat}"
											th:classappend="${#fields.hasErrors('etat')} ? has-error : ''">
											<option th:each="l:${etatManuelLabels}" th:value="${l}"
												th:text="${l}"></option>
										</select><span th:if="${#fields.hasErrors('etat')}"
											class="glyphicon glyphicon-remove form-control-feedback"></span>
										<span th:if="${#fields.hasErrors('etat')}" th:errors="*{etat}"
											class="text-danger"></span>
									</div>
								</div>
							</div>
							<div class="row line-spacer">
								<div class="col-lg-6">
									<div class="form-group">
										<label class="control-label"
											th:classappend="${#fields.hasErrors('dateParutionMinInput') or #fields.hasErrors('dateParutionMaxInput')} ? text-danger : ''"
											th:text="#{message.dateParution}"></label>
										<div class="row">
											<div class="col-lg-6">
												<div class="input-group"
													th:classappend="${#fields.hasErrors('dateParutionMinInput')} ? has-error : ''">
													<span class="input-group-addon" th:text="#{message.du}"></span>
													<input type="date" class="form-control"
														th:field="*{dateParutionMinInput}"><span
														th:if="${#fields.hasErrors('dateParutionMinInput')}"
														class="glyphicon glyphicon-remove form-control-feedback"></span>
												</div>
												<span th:if="${#fields.hasErrors('dateParutionMinInput')}"
													th:errors="*{dateParutionMinInput}" class="text-danger"></span>
											</div>
											<div class="col-lg-6">
												<div class="input-group"
													th:classappend="${#fields.hasErrors('dateParutionMaxInput')} ? has-error : ''">
													<span class="input-group-addon" th:text="#{message.au}"></span>
													<input type="date" class="form-control"
														th:field="*{dateParutionMaxInput}"><span
														th:if="${#fields.hasErrors('dateParutionMaxInput')}"
														class="glyphicon glyphicon-remove form-control-feedback"></span>
												</div>
												<span th:if="${#fields.hasErrors('dateParutionMaxInput')}"
													th:errors="*{dateParutionMaxInput}" class="text-danger"></span>
											</div>
										</div>
									</div>
								</div>
								<div class="col-lg-6">
									<div class="form-group"
										th:classappend="${#fields.hasErrors('auteur')} ? 'has-error has-feedback' : ''">
										<label class="control-label" th:text="#{message.auteur}"></label>
										<input type="text" id="nomAuteur" class="form-control"
											th:field="*{auteur}"
											th:placeholder="#{message.placeHolderNomAuteurTopo}"><span
											th:if="${#fields.hasErrors('auteur')}"
											class="glyphicon glyphicon-remove form-control-feedback"></span>
										<span th:if="${#fields.hasErrors('auteur')}"
											th:errors="*{auteur}" class="text-danger"></span>
									</div>
								</div>
							</div>
							<div class="row text-center">
								<div class="col-lg-12">
									<div class="vertical-spacer"></div>
									<ul
										class="list-inline list-inline-no-spacing no-bottom-padding-margin">
										<li><button type="submit" class="btn btn-primary btn-lg">
												<span class="glyphicon glyphicon-search"></span>
												[[#{message.trouver}]]
											</button></li>
										<li><a class="btn btn-danger btn-lg" role="button"
											th:href="@{/ami/topo/recherche}"><span
												class="glyphicon glyphicon-erase"></span>
												[[#{message.effacer}]]</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">
							[[#{message.resultatRechercheTopos}]] <span class="badge"
								th:text="${nbManuels}"></span>
						</h3>
					</div>
					<div class="scroll-horizontal">
						<table
							class="table table-striped table-hover text-nowrap no-bottom-padding-margin">
							<thead>
								<tr>
									<th th:text="#{message.nom}"></th>
									<th th:text="#{message.region}"></th>
									<th th:text="#{message.departement}"></th>
									<th th:text="#{message.codePostal}"></th>
									<th th:text="#{message.ville}"></th>
									<th th:text="#{message.categorie}"></th>
									<th th:text="#{message.etat}"></th>
									<th th:text="#{message.dateParution}"></th>
									<th th:text="#{message.auteur}"></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="l:${listeManuels}" class="pointer"
									th:onclick="'javascript:topoResultTableRowClicked(\'' + ${l.id} + '\',\'' + ${pageSize} + '\',\'' + ${pageNumber} + '\');'">
									<td th:text="${l.nom}"></td>
									<td
										th:text="${l.lieuFrance==null} ? '' : ${l.lieuFrance.region}"></td>
									<td
										th:text="${l.lieuFrance==null} ? '' : ${l.lieuFrance.departement}"></td>
									<td
										th:text="${l.lieuFrance==null} ? '' : ${l.lieuFrance.codePostal}"></td>
									<td
										th:text="${l.lieuFrance==null} ? '' : ${l.lieuFrance.ville}"></td>
									<td th:text="${l.categorie}"></td>
									<td
										th:class="${l.etat=='DISPONIBLE'} ? text-success : text-danger"><span
										th:class="${l.etat=='DISPONIBLE'} ? 'glyphicon glyphicon-ok' : 'glyphicon glyphicon-remove'">
											[[${l.etat}]]</span></td>
									<td th:text="${l.getDateParution()}"></td>
									<td th:text="${l.auteur}"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div th:if="${nbPages > 1}" class="row">
			<div class="col-lg-12 text-center">
				<nav>
					<ul class="pagination no-top-margin">
						<li th:class="${pageNumber==0} ? disabled"><a
							th:href="@{'/ami/topo/recherche/resultat/taille/'+${taille}+'/page/0'}">
								<span class="glyphicon glyphicon-fast-backward"></span>
						</a></li>
						<li th:class="${pageNumber==0} ? disabled"><a
							th:href="@{'/ami/topo/recherche/resultat/taille/'+${taille}+'/page/'+${pageNumber-1}}">
								<span class="glyphicon glyphicon-step-backward"></span>
						</a></li>
						<li th:each="p:${listePages}" th:class="${pageNumber==p} ? active"><a
							th:href="@{'/ami/topo/recherche/resultat/taille/'+${taille}+'/page/'+${p}}"
							th:text="${p+1}"></a></li>
						<li th:class="${pageNumber==nbPages-1} ? disabled"><a
							th:href="@{'/ami/topo/recherche/resultat/taille/'+${taille}+'/page/'+${pageNumber+1}}">
								<span class="glyphicon glyphicon-step-forward"></span>
						</a></li>
						<li th:class="${pageNumber==nbPages-1} ? disabled"><a
							th:href="@{'/ami/topo/recherche/resultat/taille/'+${taille}+'/page/'+${nbPages-1}}">
								<span class="glyphicon glyphicon-fast-forward"></span>
						</a></li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
	<!-- layout:fragment -->

</body>
</html>